# 구독 모델과 인앱 결제 시스템 구축하기 - 강의 스크립트

## 인트로 [0:00-0:30]
안녕하세요! 이번 강의에서는 Flutter 앱에 인앱 결제와 구독 모델을 구현하는 방법을 알아보겠습니다. 광고와 함께 인앱 결제는 앱 수익화의 핵심 요소입니다.

## 인앱 결제 기본 개념 [0:30-2:00]
**[인앱 결제 개념도]**
인앱 결제란 앱 내에서 디지털 상품이나 서비스를 구매하는 시스템입니다. 주요 유형으로는 소모품, 비소모품, 구독이 있습니다. 

MBTI 앱에서는 비소모품(상세 분석 기능)과 구독(광고 제거, 모든 기능 이용)을 구현해볼 예정입니다.

## 앱 스토어 설정 [2:00-4:00]
**[Play Console 화면]**
인앱 결제를 사용하려면 스토어 설정이 필요합니다. Google Play Console과 App Store Connect에서 상품을 등록하고 설정해야 합니다.

**[상품 등록 화면]**
우리 MBTI 앱에 적합한 상품은 '프리미엄 분석'(비소모품)과 '월간/연간 구독'(구독)입니다. 각 스토어에 상품 ID, 가격, 설명을 등록합니다.

## Flutter 프로젝트 설정 [4:00-6:00]
**[VS Code 화면]**
Flutter 프로젝트에 인앱 결제를 추가하려면 in_app_purchase 패키지가 필요합니다.

```
flutter pub add in_app_purchase
```

Android와 iOS 설정도 각각 필요합니다. Android는 billing 클라이언트를, iOS는 StoreKit 프레임워크를 설정합니다.

## 상품 정보 조회 구현 [6:00-8:00]
**[코드 에디터]**
먼저 스토어에서 상품 정보를 가져오는 코드를 구현합니다. 이를 통해 가격, 설명 등을 표시할 수 있습니다.

InAppPurchase 인스턴스를 초기화하고 상품 ID 목록을 전달하여 정보를 조회합니다. 이 정보는 구매 화면에 표시됩니다.

## 구매 프로세스 구현 [8:00-11:00]
**[구매 흐름도]**
구매 버튼을 클릭했을 때의 흐름을 구현합니다. 구매 요청, 결제 처리, 구매 완료 검증까지의 과정을 코드로 작성합니다.

구매가 완료되면 구매 정보를 로컬에 저장하고, 필요시 서버에도 기록합니다. 오류 처리도 중요합니다.

## 구독 모델 구현 [11:00-14:00]
**[구독 화면]**
월간/연간 구독 모델을 구현합니다. 구독은 자동 갱신되므로 현재 상태 확인, 만료일 추적, 갱신 알림 등의 기능이 필요합니다.

구독 상태에 따라 UI를 다르게 표시하고, 구독 혜택을 명확히 보여주는 화면을 구현합니다.

## 프리미엄 콘텐츠 관리 [14:00-16:00]
**[콘텐츠 잠금 화면]**
구매 상태에 따라 프리미엄 콘텐츠를 표시하거나 잠그는 시스템을 구현합니다.

우리 MBTI 앱에서는 결과 화면에 '상세 분석' 버튼을 추가하고, 프리미엄 사용자만 접근할 수 있도록 합니다. 구독자에게는 광고를 제거하고 모든 기능을 제공합니다.

## 구매 상태 관리 [16:00-17:30]
**[상태 관리 다이어그램]**
앱 실행마다 구매 상태를 확인하고 복원하는 로직이 필요합니다. 이를 위해 로컬 저장소와 서버 검증을 함께 사용합니다.

사용자가 기기를 변경하거나 앱을 재설치해도 구매 내역을 복원할 수 있도록 구현합니다.

## 마무리 및 법적 고려사항 [17:30-18:32]
**[요약 화면]**
인앱 결제와 구독 모델을 구현하는 방법을 배웠습니다. 마지막으로 몇 가지 법적 고려사항을 기억하세요.

구독 갱신 조건을 명확히 표시하고, 환불 정책을 앱에 명시해야 합니다. 또한 개인정보 처리방침에 결제 정보 처리 관련 내용을 포함해야 합니다.

다음 강의에서는 광고 배치 및 가격 전략에 대한 꿀팁을 알아보겠습니다. 감사합니다!
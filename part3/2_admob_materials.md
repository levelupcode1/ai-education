# Cursor AI로 Flutter AdMob 광고 시스템 구현하기

## 🎯 학습 목표
- Cursor AI를 활용하여 AdMob 설정부터 구현까지 프롬프트로 완성하기
- 효과적인 프롬프트 작성으로 시행착오 최소화하기
- AI 도움으로 광고 시스템 최적화하기
- 코딩 경험이 적어도 수익형 앱 개발하기

## 📋 준비사항

### 1. Google AdMob 계정 설정
먼저 https://admob.google.com 에서 계정을 생성하고 다음 정보를 준비하세요:
- 앱 ID (예: ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy)
- 배너 광고 단위 ID (예: ca-app-pub-xxxxxxxxxxxxxxxx/1111111111)
- 전면 광고 단위 ID (예: ca-app-pub-xxxxxxxxxxxxxxxx/2222222222)
- 리워드 광고 단위 ID (예: ca-app-pub-xxxxxxxxxxxxxxxx/3333333333)

### 2. 테스트 광고 ID 목록
실습 중에는 항상 테스트 ID를 사용하세요:
- 테스트 배너: ca-app-pub-3940256099942544/6300978111
- 테스트 전면: ca-app-pub-3940256099942544/1033173712
- 테스트 리워드: ca-app-pub-3940256099942544/5224354917

## 🤖 Cursor AI와 함께하는 AdMob 구현

### 1단계: 프로젝트 기본 설정

**Cursor AI에게 요청할 프롬프트:**

```
Flutter 프로젝트에 Google AdMob을 연동하려고 합니다. 다음 작업을 도와주세요:

1. pubspec.yaml에 google_mobile_ads 패키지 추가
2. android/app/src/main/AndroidManifest.xml에 AdMob App ID 설정
3. ios/Runner/Info.plist에 AdMob App ID 설정
4. main.dart에서 AdMob 초기화 코드 작성

현재 프로젝트는 Flutter 3.0 이상이고, 앱 ID는 "ca-app-pub-3940256099942544~3347511713" (테스트용)을 사용하겠습니다.

각 파일별로 정확한 위치와 코드를 제공해주세요.
```

**예상 결과:**
- Cursor AI가 필요한 모든 설정 파일을 자동으로 수정
- 각 단계별 설명과 함께 코드 제공
- 오류 방지를 위한 주의사항 안내

### 2단계: 배너 광고 구현

**Cursor AI에게 요청할 프롬프트:**

```
Flutter MBTI 앱의 메인 화면 하단에 배너 광고를 구현하고 싶습니다. 

요구사항:
- 화면 하단에 고정된 배너 광고
- 광고 로딩 중에는 빈 공간으로 처리
- 광고 로드 실패 시 에러 처리
- 테스트 광고 ID 사용: ca-app-pub-3940256099942544/6300978111
- 메모리 누수 방지를 위한 dispose 처리

현재 메인 화면 코드:
[여기에 현재 화면 코드 붙여넣기]

BannerAdWidget이라는 재사용 가능한 위젯으로 만들어주세요.
```

**추가 최적화 프롬프트:**

```
위에서 만든 배너 광고를 다음과 같이 개선해주세요:

1. 광고 크기를 화면 크기에 맞게 반응형으로 조정
2. 광고가 로드되기 전까지는 화면 레이아웃이 깨지지 않도록 처리
3. 인터넷 연결이 없을 때의 예외 처리
4. 광고 클릭 및 노출 이벤트 로그 추가

성능 최적화와 사용자 경험을 모두 고려한 코드로 작성해주세요.
```

### 3단계: 전면 광고 구현

**Cursor AI에게 요청할 프롬프트:**

```
MBTI 테스트 완료 후 결과 화면으로 이동하기 전에 전면 광고를 표시하고 싶습니다.

요구사항:
- 테스트 완료 버튼 클릭 시 전면 광고 표시
- 광고 시청 완료 또는 닫기 후 결과 화면으로 이동
- 광고 로드 실패 시 바로 결과 화면으로 이동
- 테스트 광고 ID: ca-app-pub-3940256099942544/1033173712
- 광고는 미리 로드해두고 적절한 타이밍에 표시
- 사용자가 뒤로 가기를 눌러도 정상 작동

InterstitialAdManager 클래스를 만들어서 전면 광고를 관리하는 코드를 작성해주세요.

현재 테스트 완료 처리 코드:
[여기에 현재 코드 붙여넣기]
```

### 4단계: 리워드 광고 구현

**Cursor AI에게 요청할 프롬프트:**

```
MBTI 앱에 프리미엄 기능을 추가하려고 합니다. 리워드 광고를 시청하면 다음 혜택을 제공하고 싶습니다:

혜택:
- 상세한 성격 분석 결과 해제
- 궁합 분석 기능 무료 이용 (1회)
- 추가 MBTI 유형별 직업 추천

요구사항:
- "프리미엄 혜택 받기" 버튼 클릭 시 리워드 광고 표시
- 광고 시청 완료 시에만 혜택 제공
- 광고 시청 중 앱을 떠나거나 닫으면 혜택 제공하지 않음
- 테스트 광고 ID: ca-app-pub-3940256099942544/5224354917
- 혜택 상태를 SharedPreferences로 저장
- 혜택 사용 후 다시 광고 시청해야 재사용 가능

RewardedAdWidget과 PremiumManager 클래스를 만들어서 구현해주세요.
```

### 5단계: 광고 수익 최적화

**Cursor AI에게 요청할 프롬프트:**

```
현재 구현된 AdMob 광고 시스템을 수익 최적화 관점에서 개선하고 싶습니다.

분석해주세요:
1. 현재 광고 배치의 문제점
2. 사용자 경험을 해치지 않으면서 수익을 높일 수 있는 방법
3. 광고 노출 빈도 최적화 전략

그리고 다음 기능을 구현해주세요:
- 광고 클릭률과 노출률 추적 시스템
- 광고 로드 실패 시 재시도 메커니즘 (최대 3회)
- 사용자 행동 패턴에 따른 광고 표시 타이밍 조절
- A/B 테스트를 위한 광고 배치 변경 시스템

AdAnalytics 클래스를 만들어서 구현해주세요.
```

## 🔧 고급 활용 프롬프트

### 동적 광고 관리 시스템

```
사용자의 앱 사용 패턴에 따라 광고를 동적으로 관리하는 시스템을 만들고 싶습니다.

기능:
- 앱 사용 시간이 5분 이상일 때만 전면 광고 표시
- 같은 세션에서 전면 광고는 최대 2회까지만 표시
- 광고 시청 거부율이 높은 사용자에게는 광고 빈도 줄이기
- 프리미엄 구매 사용자에게는 광고 표시하지 않기

SmartAdManager 클래스로 구현해주세요.
```

### 광고 A/B 테스트 시스템

```
광고 배치와 타이밍을 A/B 테스트할 수 있는 시스템을 구현해주세요.

테스트 변수:
- 배너 광고 위치 (상단 vs 하단)
- 전면 광고 표시 타이밍 (즉시 vs 3초 후)
- 리워드 광고 혜택 수량 (1회 vs 3회)

사용자를 무작위로 그룹에 배정하고, 각 그룹의 광고 성과를 측정하는 ABTestManager를 만들어주세요.
```

## 📊 성과 측정 및 분석

### 분석 대시보드 구현

**Cursor AI에게 요청할 프롬프트:**

```
앱 내에서 광고 성과를 실시간으로 확인할 수 있는 간단한 대시보드를 만들고 싶습니다.

표시할 정보:
- 오늘/이번 주/이번 달 광고 노출 수
- 예상 수익 (AdMob API 연동)
- 광고 클릭률
- 사용자당 평균 광고 시청 횟수
- 리워드 광고 완료율

관리자만 접근 가능하도록 비밀 제스처(화면을 5번 탭)로 접근하는 AdminDashboard 화면을 만들어주세요.
```

## 🚀 배포 전 최종 점검

### 프로덕션 준비 프롬프트

```
AdMob이 연동된 앱을 스토어에 배포하기 전에 점검해야 할 사항들을 확인하고 수정해주세요.

점검 항목:
1. 모든 테스트 광고 ID를 실제 광고 ID로 변경
2. 광고 관련 권한 설정 확인
3. 개인정보 처리방침에 광고 관련 내용 추가 필요 여부
4. iOS App Tracking Transparency 설정
5. Android 광고 ID 권한 설정
6. 메모리 누수 검사
7. 광고 로드 실패 시나리오 테스트

각 항목별로 체크리스트와 수정 방법을 제공해주세요.
```

## 💡 문제 해결 가이드

### 자주 발생하는 오류와 해결 프롬프트

**광고가 표시되지 않을 때:**
```
AdMob 광고가 표시되지 않습니다. 다음 사항을 진단하고 해결책을 제시해주세요:

현재 상황:
- 앱 빌드는 정상적으로 됨
- 콘솔에 특별한 에러 메시지 없음
- 테스트 기기에서 테스트 광고도 안 보임

진단할 항목:
1. AndroidManifest.xml과 Info.plist 설정
2. 광고 ID 형식 확인
3. 네트워크 권한 확인
4. AdMob 초기화 코드 검증
5. 광고 로드 타이밍 문제

단계별로 확인하고 해결하는 코드를 제공해주세요.
```

**성능 최적화가 필요할 때:**
```
앱에 광고를 추가한 후 성능이 저하되고 있습니다. 최적화 방법을 제시해주세요:

문제점:
- 앱 시작 시간이 길어짐
- 화면 전환이 버벅거림
- 메모리 사용량 증가

최적화 요청:
1. 광고 로딩을 백그라운드에서 처리
2. 불필요한 광고 요청 줄이기
3. 메모리 효율적인 광고 관리
4. 광고 캐싱 전략 개선

PerformanceOptimizedAdManager 클래스로 구현해주세요.
```

## 🎓 실습 프로젝트

### 종합 실습: 수익형 MBTI 앱 완성

**최종 통합 프롬프트:**
```
지금까지 학습한 내용을 종합하여 수익형 MBTI 앱을 완성하겠습니다.

구현할 기능:
1. 메인 화면 하단 배너 광고
2. 테스트 완료 후 전면 광고
3. 프리미엄 결과를 위한 리워드 광고
4. 광고 성과 추적 시스템
5. 사용자 친화적인 광고 경험

전체적으로 통합된 AdSystemManager를 만들어서 모든 광고를 중앙 관리하고, 사용자 경험과 수익 최적화를 모두 고려한 완성된 시스템을 구현해주세요.

현재 앱 구조:
[앱의 현재 구조와 주요 화면들을 설명]

각 화면별로 최적의 광고 전략과 구현 방법을 제시해주세요.
```

## 📈 다음 단계

이 교재를 완료한 후에는:
1. 실제 AdMob 계정으로 수익 확인
2. 다른 광고 네트워크(Facebook Audience Network 등) 연동
3. 구독 모델과 광고 모델의 하이브리드 수익화 전략
4. 사용자 세그먼테이션을 통한 광고 개인화

모든 과정에서 Cursor AI를 활용하여 효율적으로 개발하고, 지속적으로 최적화해 나가세요!
